import{_ as f,r as u,o as r,c as i,b as h,a as t,t as n,F as _,i as b,h as x,k as v,g as k,f as L}from"./index-hwFi2sDP.js";const p="https://vue3-course-api.hexschool.io/v2",g="rock",O={data(){return{order:{user:{name:"",address:"",tel:"",email:""}},id:"",isLoading:!1,isPaying:!1}},methods:{getOrder(o){this.isLoading=!0,this.$http.get(`${p}/api/${g}/order/${o}`).then(s=>{this.order={...s.data.order},this.isLoading=!1}).catch(s=>{console.log(s),this.isLoading=!1,alert(s.reponse.data.message)})},payOrder(o){this.isPaying=!0,this.$http.post(`${p}/api/${g}/pay/${o}`).then(s=>{this.isPaying=!1,alert(s.data.message),this.getOrder(this.id)}).catch(s=>{this.isPaying=!1,alert(s.reponse.data.message)})},currency(o){return`${parseInt(o,10).toFixed(0).replace(/./g,(a,d,e)=>d&&a!=="."&&(e.length-d)%3===0?`, ${a}`.replace(/\s/g,""):a)}`}},mounted(){this.id=this.$route.params.id,this.getOrder(this.id)}},P={class:"text-center h3 my-4"},w={class:"container"},N={class:"table mt-4"},V=t("thead",null,[t("tr",null,[t("th",null,"品名"),t("th",null,"數量"),t("th",null,"單價")])],-1),B={class:"text-end"},C=t("td",{colspan:"2",class:"text-end"},"總計",-1),F={class:"text-end"},D={class:"table"},E=t("th",{width:"100"},"Email",-1),S=t("th",null,"姓名",-1),q=t("th",null,"收件人電話",-1),I=t("th",null,"收件人地址",-1),T=t("th",null,"付款狀態",-1),U={key:0},$={key:1,class:"text-success"},j={key:0,class:"text-end"},z=["disabled"];function A(o,s,a,d,e,c){const y=u("myLoading"),m=u("font-awesome-icon");return r(),i(_,null,[h(y,{active:e.isLoading},null,8,["active"]),t("div",P,"訂單編號："+n(e.id),1),t("div",w,[t("table",N,[V,t("tbody",null,[(r(!0),i(_,null,b(e.order.products,l=>(r(),i("tr",{key:l.id},[t("td",null,n(l.product.title),1),t("td",null,n(l.qty)+"/"+n(l.product.unit),1),t("td",B,n(c.currency(l.final_total)),1)]))),128))]),t("tfoot",null,[t("tr",null,[C,t("td",F,n(c.currency(e.order.total)),1)])])]),t("table",D,[t("tbody",null,[t("tr",null,[E,t("td",null,n(e.order.user.email),1)]),t("tr",null,[S,t("td",null,n(e.order.user.name),1)]),t("tr",null,[q,t("td",null,n(e.order.user.tel),1)]),t("tr",null,[I,t("td",null,n(e.order.user.address),1)]),t("tr",null,[T,t("td",null,[e.order.is_paid?(r(),i("span",$,"付款完成")):(r(),i("span",U,"尚未付款"))])])])]),e.order.is_paid===!1?(r(),i("div",j,[t("button",{type:"button",class:"btn btn-danger",disabled:e.isPaying,onClick:s[0]||(s[0]=l=>c.payOrder(this.id))},[x(h(m,{icon:"spinner",class:"fa-spin"},null,512),[[v,e.isPaying]]),k(" 確認付款去 ")],8,z)])):L("",!0)])],64)}const H=f(O,[["render",A]]);export{H as default};
