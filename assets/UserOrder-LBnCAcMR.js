import{_,r as p,o as l,c as r,b as g,a as t,t as n,F as d,i as m,f as y}from"./index-UMp20Tq9.js";const a="https://vue3-course-api.hexschool.io/v2",c="rock",f={data(){return{order:{user:{name:"",address:"",tel:"",email:""}},id:"",isLoading:!1,isPaying:!1}},methods:{getOrder(i){this.isLoading=!0,this.$http.get(`${a}/api/${c}/order/${i}`).then(s=>{this.order={...s.data.order},this.isLoading=!1}).catch(s=>{console.log(s),this.isLoading=!1,alert(s.reponse.data.message)})},payOrder(i){this.isPaying=!0,this.$http.post(`${a}/api/${c}/pay/${i}`).then(s=>{this.isPaying=!1,alert(s.data.message),this.getOrder(this.id)}).catch(s=>{this.isPaying=!1,alert(s.reponse.data.message)})}},mounted(){this.id=this.$route.params.id,this.getOrder(this.id)}},b={class:"text-center h3 my-4"},x={class:"container"},v={class:"table mt-4"},k=t("thead",null,[t("tr",null,[t("th",null,"品名"),t("th",null,"數量"),t("th",null,"單價")])],-1),L={class:"text-end"},O=t("td",{colspan:"2",class:"text-end"},"總計",-1),P={class:"text-end"},B={class:"table"},C=t("th",{width:"100"},"Email",-1),N=t("th",null,"姓名",-1),V=t("th",null,"收件人電話",-1),E=t("th",null,"收件人地址",-1),F=t("th",null,"付款狀態",-1),$={key:0},q={key:1,class:"text-success"},w={key:0,class:"text-end"},D=["disabled"];function S(i,s,U,j,e,u){const h=p("myLoading");return l(),r(d,null,[g(h,{active:e.isLoading},null,8,["active"]),t("div",b,"訂單編號："+n(e.id),1),t("div",x,[t("table",v,[k,t("tbody",null,[(l(!0),r(d,null,m(e.order.products,o=>(l(),r("tr",{key:o.id},[t("td",null,n(o.product.title),1),t("td",null,n(o.qty)+"/"+n(o.product.unit),1),t("td",L,n(o.final_total),1)]))),128))]),t("tfoot",null,[t("tr",null,[O,t("td",P,n(e.order.total),1)])])]),t("table",B,[t("tbody",null,[t("tr",null,[C,t("td",null,n(e.order.user.email),1)]),t("tr",null,[N,t("td",null,n(e.order.user.name),1)]),t("tr",null,[V,t("td",null,n(e.order.user.tel),1)]),t("tr",null,[E,t("td",null,n(e.order.user.address),1)]),t("tr",null,[F,t("td",null,[e.order.is_paid?(l(),r("span",q,"付款完成")):(l(),r("span",$,"尚未付款"))])])])]),e.order.is_paid===!1?(l(),r("div",w,[t("button",{type:"button",class:"btn btn-danger",disabled:e.isPaying,onClick:s[0]||(s[0]=o=>u.payOrder(this.id))},"確認付款去 ",8,D)])):y("",!0)])],64)}const A=_(f,[["render",S]]);export{A as default};
