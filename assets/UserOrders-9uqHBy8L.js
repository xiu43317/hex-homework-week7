import{_ as y,r as v,o as n,c as o,b as f,a as t,F as r,i as u,t as l,f as h,h as _,k as p}from"./index-hwFi2sDP.js";const k="https://vue3-course-api.hexschool.io/v2",b="rock",L={data(){return{isLoading:!1,orders:[]}},methods:{getOrders(){this.isLoading=!0,this.$http.get(`${k}/api/${b}/orders`).then(e=>{this.isLoading=!1,this.orders=[...e.data.orders],this.orders.forEach((c,d)=>{this.orders[d].create_at=this.covertDate(c.create_at)})}).catch(e=>{this.isLoading=!1,console.log(e),alert(e.response.data.message)})},covertDate(e){return new Date(e*1e3).toLocaleDateString()},goToOrder(e){this.$router.push(`/order/${e}`)}},mounted(){this.getOrders()}},x=t("div",{class:"text-center h3 my-4"},"訂單狀態",-1),C={class:"container"},D={class:"table"},$=t("thead",null,[t("tr",null,[t("th",null,"購買時間"),t("th",null,"Email"),t("th",null,"購買款項"),t("th",null,"應付金額"),t("th",null,"是否付款"),t("th",null,"查看明細")])],-1),O={key:0},w=["textContent"],B={class:"list-unstyled"},E={class:"text-right"},N=["onClick"];function S(e,c,d,V,i,g){const m=v("myLoading");return n(),o(r,null,[f(m,{active:i.isLoading},null,8,["active"]),x,t("div",C,[t("table",D,[$,t("tbody",null,[(n(!0),o(r,null,u(i.orders,s=>(n(),o(r,{key:s.id},[i.orders.length?(n(),o("tr",O,[t("td",null,l(s.create_at),1),t("td",null,[s.user?(n(),o("span",{key:0,textContent:l(s.user.email)},null,8,w)):h("",!0)]),t("td",null,[t("ul",B,[(n(!0),o(r,null,u(s.products,a=>(n(),o("li",{key:a.id},l(a.product.title)+" 數量："+l(a.qty)+" "+l(a.product.unit),1))),128))])]),t("td",E,l(s.total),1),t("td",null,[_(t("span",null,"已付款",512),[[p,s.is_paid]]),_(t("span",null,"未付款",512),[[p,!s.is_paid]])]),t("td",null,[t("button",{class:"btn btn-outline-primary btn-sm",type:"button",onClick:a=>g.goToOrder(s.id)}," 檢視 ",8,N)])])):h("",!0)],64))),128))])])])],64)}const T=y(L,[["render",S]]);export{T as default};
